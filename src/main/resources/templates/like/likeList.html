<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관심목록</title>
    <link rel="stylesheet" href="css/likeListStyle.css">
</head>
<body>

    <h1>관심목록</h1>

    <div class="filter-buttons">
        <button>전체</button>
        <button>중고거래</button>
        <button>동네홍보</button>
        <button>부동산</button>
        <button>알바</button>
    </div>

    <div class="product-list">

        <div th:each="item : ${likeList}">
            <div class="product-item">
                <img src="assets/item/joohwan.jpg" alt="상품이미지">
                <div class="product-info">

                    <div class="div-temp1">
                        <h2 th:text="${item.itemCode}">상품명</h2>
                        <p>상품설명</p>
                        <span class="product-price">가격정보</span>
                    </div>
                    <div class="div-temp2">
                        <button class="like-button">
                            <img src="assets/icon/heart.gif" alt="찜하기">
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="product-item">
            <img src="assets/item/joohwan.jpg" alt="탕진핑">
            <div class="product-info">

                <div class="div-temp1">
                    <h2>프리미엄 주환이1</h2>
                    <p>구월동, 길거리 상품</p>
                    <span class="product-price">5,000원</span>
                </div>

                <div class="div-temp2">
                    <button class="like-button">
                        <img src="assets/icon/heart.gif" alt="찜하기">
                    </button>
                </div>

            </div>
        </div>

        <div class="product-item">
            <img src="assets/item/joohwan.jpg" alt="함께 일할 직원 모집">
            <div class="product-info">

                <div class="div-temp1">
                    <h2>꿀알바2</h2>
                    <p>구월동, 알바</p>
                    <span class="product-price">월급 3000만원</span>
                </div>

                <div class="div-temp2">
                    <button class="like-button">
                        <img src="assets/icon/brokenHeart.gif" alt="찜하기">
                    </button>
                </div>

            </div>
        </div>

        <div class="product-item">
            <img src="assets/item/joohwan.jpg" alt="탕진핑">
            <div class="product-info">

                <div class="div-temp1">
                    <h2>세미 주환이3</h2>
                    <p>만수동, 길거리 상품</p>
                    <span class="product-price">100원</span>
                </div>

                <div class="div-temp2">
                    <button class="like-button">
                        <img src="assets/icon/heart.gif" alt="찜하기">
                    </button>
                </div>

            </div>
        </div>

        <div class="product-item">
            <img src="assets/item/joohwan.jpg" alt="함께 일할 직원 모집">
            <div class="product-info">

                <div class="div-temp1">
                    <h2>돈많이 줄께4</h2>
                    <p>논현동, 알바</p>
                    <span class="product-price">월급 7000만원</span>
                </div>

                <div class="div-temp2">
                    <button class="like-button">
                        <img src="assets/icon/heart.gif" alt="찜하기">
                    </button>
                </div>

            </div>
        </div>

        <div class="product-item">
            <img src="assets/item/joohwan.jpg" alt="함께 일할 직원 모집">
            <div class="product-info">
                <div class="div-temp1">
                    <h2>단기 대타구합니다5</h2>
                    <p>간석동, 알바</p>
                    <span class="product-price">월급 1000만원</span>
                </div>

                <div class="div-temp2">
                    <button class="like-button">
                        <img src="assets/icon/heart.gif" alt="찜하기">
                    </button>
                </div>

            </div>
        </div>

        <div class="product-item">
            <img src="assets/item/joohwan.jpg" alt="함께 일할 직원 모집">
            <div class="product-info">
                <div class="div-temp1">
                    <h2>가족같은 노예구해요6</h2>
                    <p>만수동, 알바</p>
                    <span class="product-price">월급 700원</span>
                </div>

                <div class="div-temp2">
                    <button class="like-button">
                        <img src="assets/icon/heart.gif" alt="찜하기">
                    </button>
                </div>

            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const memberId = 'user1';  // 실제 멤버 ID로 변경
            fetch(`/likeList/list?memberId=${memberId}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    const productList = document.querySelector('.product-list');
                    productList.innerHTML = ''; // 기존 내용을 초기화
                    data.forEach(item => {
                        const productItem = document.createElement('div');
                        productItem.classList.add('product-item');
                        productItem.innerHTML = `
                    <img src="assets/item/johwan.jpg" alt="상품 이미지">
                    <div class="product-info">
                        <div class="div-temp1">
                            <h2>${item.itemCode}</h2>
                            <p>상품 설명</p>
                            <span class="product-price">가격 정보</span>
                        </div>
                        <div class="div-temp2">
                            <button class="like-button" onclick="removeLikeList(${item.itemCode})">
                                <img src="assets/icon/heart.gif" alt="찜하기">
                            </button>
                        </div>
                    </div>
                `;
                        productList.appendChild(productItem);
                    });
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                });
        });

        // 찜 목록에서 상품 제거
        function removeLikeList(likeListId) {
            fetch(`/likeList/${likeListId}`, {
                method: 'DELETE'
            })
                .then(response => {
                    if (response.ok) {
                        alert('상품이 찜 목록에서 제거되었습니다.');
                        location.reload(); // 페이지 새로고침
                    } else {
                        alert('상품 제거에 실패했습니다.');
                    }
                })
                .catch(error => {
                    console.error('There was a problem with the delete operation:', error);
                });
        }
    </script>


</body>
</html>